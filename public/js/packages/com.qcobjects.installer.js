"use strict";var global=(()=>{var ft=Object.defineProperty;var d=(C,l)=>ft(C,"name",{value:l,configurable:!0}),Le=(C=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(C,{get:(l,g)=>(typeof require<"u"?require:l)[g]}):C)(function(C){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+C+'" is not supported')});var de=(C,l)=>()=>(l||C((l={exports:{}}).exports,l),l.exports);var Ye=de((At,ye)=>{d(function C(l){"use strict";if(typeof Object.defineProperty<"u"&&typeof l<"u")try{Object.defineProperty(l,"__qcobjects_sdk__",{enumerable:!0,configurable:!1,writable:!1,value:C})}catch{typeof l.__qcobjects_sdk__<"u"&&(l.__qcobjects_sdk__.loaded=!0)}if(typeof l.__qcobjects_sdk__.__loaded__>"u"){if(l.__qcobjects_sdk__.__loaded__=!0,typeof l>"u")throw Error("Top context empty: It should either global, module or window");var g=l;l.global=g;var R=typeof window<"u"&&typeof window.self<"u"&&window===window.self,m=CONFIG.get("remoteImportsPath"),ge=CONFIG.get("relativeImportPath"),T=!CONFIG.get("useLocalSDK");T?CONFIG.set("remoteImportsPath","https://sdk.qcobjects.dev/v2.4/js/"):CONFIG.set("relativeImportPath","qcobjects-sdk/js/"),typeof l._DOMCreateElement>"u"&&(l._DOMCreateElement=function(q){var P;return R?P=document.createElement(q):P={},P});var k;if(R)k=[Import("org.qcobjects.i18n_messages",function(){},T),Import("org.qcobjects.models",function(){},T),Import("org.qcobjects.components",function(){},T),Import("org.qcobjects.components.grid",function(){},T),Import("org.qcobjects.components.list",function(){},T),Import("org.qcobjects.components.slider",function(){},T),Import("org.qcobjects.components.notifications",function(){},T),Import("org.qcobjects.components.splashscreen",function(){},T),Import("org.qcobjects.controllers",function(){},T),Import("org.qcobjects.controllers.grid",function(){},T),Import("org.qcobjects.controllers.list",function(){},T),Import("org.qcobjects.controllers.slider",function(){},T),Import("org.qcobjects.controllers.form",function(){},T),Import("org.qcobjects.controllers.swagger",function(){},T),Import("org.qcobjects.effects",function(){},T),Import("org.qcobjects.modal.controllers",function(){},T),Import("org.qcobjects.views",function(){},T),Import("org.qcobjects.tools.canvas",function(){},T),Import("org.qcobjects.tools.layouts",function(){},T),Import("org.qcobjects.cloud.auth.session.usertoken",function(){},T),Import("org.qcobjects.cloud.auth.session.data",function(){},T)];else{var I="qcobjects-sdk/src/js/";k=[Import(I+"org.qcobjects.models",function(){},T),Import(I+"org.qcobjects.components",function(){},T),Import(I+"org.qcobjects.controllers",function(){},T),Import(I+"org.qcobjects.views",function(){},T),Import(I+"org.qcobjects.effects",function(){},T),Import(I+"org.qcobjects.tools.canvas",function(){},T),Import(I+"org.qcobjects.tools.layouts",function(){},T),Import(I+"org.qcobjects.cloud.auth.session.usertoken",function(){},T),Import(I+"org.qcobjects.cloud.auth.session.data",function(){},T)]}let V=GlobalSettings.__start__.bind(l);l._sdk_=Promise.all(k).then(()=>{CONFIG.set("useSDK",!0),CONFIG.set("remoteImportsPath",m),CONFIG.set("relativeImportPath",ge),V()})}},"__qcobjects_sdk__").call(null,typeof ye=="object"&&typeof ye.exports=="object"?ye.exports=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}:typeof global=="object"?global:typeof window=="object"?window:{})});var _e=de((Ct,Be)=>{var pt=Ye();Be.exports=pt});var Ze=de((kt,re)=>{d(function C(l){"use strict";if(typeof Object.defineProperty<"u"&&typeof l<"u")try{Object.defineProperty(l,"__qcobjects__",{enumerable:!0,configurable:!1,writable:!1,value:C})}catch{typeof l.__qcobjects__<"u"&&(l.__qcobjects__.loaded=!0)}if(typeof l.__qcobjects__.loaded>"u"){let ue=function(t){m?oe.push(t.bind(window)):typeof g<"u"&&oe.push(t.bind(g))};d(ue,"Ready"),l.__qcobjects__.loaded=!0;var g=l;l.global=g;var R=typeof window<"u"&&"Deno"in window,m=typeof window<"u"&&typeof window.self<"u"&&window===window.self&&!R,ge=typeof re<"u",T=d(function(){},"deno_require"),k=d(function(){return R?T(...arguments):Le(...arguments)},"_require_"),I=d(function(t){var e=typeof t.prototype<"u"?t.prototype.toString:function(){return""};typeof t.prototype<"u"&&(t.prototype.toString=function(){var n=["__qcobjects__","__qcobjects_sdk__","__loaded__","ComplexStorageCache","css","append","attachIn","debug","info","warn","QC_Append","set","get","done","componentDone","_new_","__new__","Class","ClassFactory","New","Export","Package","Import","subelements","componentLoader","buildComponents","Controller","View","VO","Service","serviceLoader","JSONService","ConfigService","SourceJS","SourceCSS","ArrayList","ArrayCollection","Effect","Timer","sum","avg","table","max","min","range","matrix","matrix2d","matrix3d","unique","uniqueId","shortCode","NamespaceRef"],r;return n.includes(this.name)?r=this.name+"{ [QCObjects native code] }":r=e.call(this),r})},"_protected_code_");I(Function);var V=d(function(t){var e=[];for(var n in t)(typeof t[n]).toLowerCase()==="function"&&e.push(t[n]);return e},"_methods_");String.prototype.__mAll__=function(t){var e=[];return this.replace(t,function(){var n=Array.prototype.slice.call(arguments,0,-2);n.input=arguments[arguments.length-1],n.index=arguments[arguments.length-2],e.push(n)}),e},typeof String.prototype.matchAll>"u"&&(String.prototype.matchAll=String.prototype.__mAll__);var q=d(function(t){var e;return m?e=document.createElement(t):e={},e},"_DOMCreateElement");if(!m){let t=k("fs")}var P=d(function(t){var e=d(function(){var n=new WeakSet,r=0;return function(o,i){if(typeof i=="object"&&i!==null){if(n.has(i))return r+=1,r<=3?we(i):null;n.add(i)}return i}},"getCircularReplacer");return JSON.stringify(t,e())},"_DataStringify");if(m){var fe=d(function(e){return[...this.querySelectorAll(e)]},"subelements");Element.prototype.subelements=fe,HTMLDocument.prototype.subelements=fe,HTMLElement.prototype.subelements=fe,typeof ShadowRoot<"u"&&(ShadowRoot.prototype.subelements=fe)}if(m)try{l=typeof window.top<"u"?window.top:window,l._allowed_=!0}catch{try{l=document,l._allowed_=!0}catch{try{l=g,l._allowed_=!0}catch{l={},l._allowed_=!0}}}else typeof g<"u"&&(l=g);var B,U,He="quick-component:not([loaded]),component:not([loaded])";if(U=function(){var t="";if(m){var e=l.document.baseURI.split("?")[0].split("/");e.pop(),t=e.join("/")+"/"}else{var n;try{n=k("process")}catch{}typeof n<"u"?t=`${n.cwd()}/`:t=""}return t}(),m){"Promise"in l||(l.Promise=function(t){var e={then(){},catch(){},_then(n){this.then.call(e,n)},_catch(n){this.catch.call(e,n)}};return t.call(e,e._then,e._catch),e}),typeof l.console>"u"&&(l.console=function(){},l.console.prototype.log=function(t){}),B=function(){return typeof document<"u"&&document.domain!==""?document.domain:"localhost"}();var Z=function(){var t=l[(![]+[])[+!+[]+ +!+[]]+(typeof![])[+!+[]]+(typeof[])[(+!+[]+ +!+[])*(+!+[]+ +!+[])]+(![]+[])[+!+[]]+(!![]+[])[+[]]+([]+[]+[][[]])[+[+!+[]+[+[]]]/(+!+[]+ +!+[])]+(typeof![])[+!+[]]+([]+[]+[][[]])[+!+[]]]["h"+(typeof![])[+!+[]]+(![]+[])[+!+[]+(+!+[]+ +!+[])]+(!![]+[])[+[]]].toLowerCase();return t}(),$e=function(){return typeof cordova<"u"}()}else{var Z="secret";B="localhost"}l._asyncLoad=[];var pe=d(function(t,e){var n={func:t,args:e,dispatch(){this.func.apply(null,this.args)}};return l._asyncLoad.push(n),n},"asyncLoad");if(m){var et=d(function(){document.readyState==="complete"&&l._asyncLoad.map(function(t){t.dispatch.call(t)})},"_fireAsyncLoad");document.onreadystatechange=et}else typeof l.global<"u"&&(l.global._fireAsyncLoad=function(){l._asyncLoad.map(function(t){t.dispatch.call(t)})});l.asyncLoad=pe;var tt=d(function(){return{debugEnabled:!0,infoEnabled:!0,warnEnabled:!0,debug(t){this.debugEnabled&&console.log("\x1B[35m%s\x1B[0m",`[DEBUG][${performance.now().toLocaleString()}] ${t}`)},info(t){var e;this.infoEnabled&&(m?e="\x1B[103m%s\x1B[0m":e="\x1B[33m%s\x1B[0m",console.info(e,`[INFO][${performance.now().toLocaleString()}] ${t}`))},warn(t){this.warnEnabled&&console.warn("\x1B[31m%s\x1B[0m",`[WARN][${performance.now().toLocaleString()}] ${t}`)}}},"Logger"),s=new tt;s.debugEnabled=!1,s.infoEnabled=!0,l.logger=s;var K={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode(t){var e="",n,r,o,i,a,u,c,f=0;for(t=K._utf8_encode(t);f<t.length;)n=t.charCodeAt(f++),r=t.charCodeAt(f++),o=t.charCodeAt(f++),i=n>>2,a=(n&3)<<4|r>>4,u=(r&15)<<2|o>>6,c=o&63,isNaN(r)?u=c=64:isNaN(o)&&(c=64),e=e+this._keyStr.charAt(i)+this._keyStr.charAt(a)+this._keyStr.charAt(u)+this._keyStr.charAt(c);return e},decode(t){var e="",n,r,o,i,a,u,c,f=0;for(t=t.replace(/[^A-Za-z0-9+/=]/g,"");f<t.length;)i=this._keyStr.indexOf(t.charAt(f++)),a=this._keyStr.indexOf(t.charAt(f++)),u=this._keyStr.indexOf(t.charAt(f++)),c=this._keyStr.indexOf(t.charAt(f++)),n=i<<2|a>>4,r=(a&15)<<4|u>>2,o=(u&3)<<6|c,e=e+String.fromCharCode(n),u!==64&&(e=e+String.fromCharCode(r)),c!==64&&(e=e+String.fromCharCode(o));return e=K._utf8_decode(e),e},_utf8_encode(t){t=t.replace(/rn/g,"n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(r&63|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(r&63|128))}return e},_utf8_decode(t){for(var e="",n=0,r=0,o=0,i=0,a;n<t.length;)r=t.charCodeAt(n),r<128?(e+=String.fromCharCode(r),n++):r>191&&r<224?(i=t.charCodeAt(n+1),e+=String.fromCharCode((r&31)<<6|i&63),n+=2):(i=t.charCodeAt(n+1),a=t.charCodeAt(n+2),e+=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63),n+=3);return e}},nt=d(function(t,e){var n=d(function(r,o){var i=2e3,a=0,u=setInterval(function(){o.call()?(clearInterval(u),r.call(),s.debug("Ejecuting "+r.name+" after wait")):a<i?(a+=1,s.debug("WAIT UNTIL "+r.name+" is true, "+a.toString()+" cycles")):(s.debug("Max execution time for "+r.name+" expression until true"),clearInterval(u))},1)},"_waitUntil");setTimeout(function(){n(t,e)},1)},"waitUntil");if(typeof Q>"u")var Q={getItem(t){return Object.hasOwnProperty.call(this,t)?this[t]:null},setItem(t,e){this[t]=e},removeItem(t){delete this[t]}};var x=d(function(t){var e,n,r;if(e=t.index,typeof e<"u"){n=t.load,r=t.alternate;var o=this.getID(e),i=Q.getItem(o);if(this.isEmpty(i)){var a=n.call(null,{cachedObjectID:o,cachedResponse:i,cache:this});this.save(e,a),s.debug("RESPONSE OF {{cachedObjectID}} CACHED".replace("{{cachedObjectID}}",o))}else{var u=r.call(null,{cachedObjectID:o,cachedResponse:i,cache:this});s.debug("RESPONSE OF {{cachedObjectID}} IS ALREADY CACHED ".replace("{{cachedObjectID}}",o))}}else throw new Error("ComplexStorageCache: index is undefined");return this},"ComplexStorageCache");if(x.prototype.getItem=function(t){var e=Q.getItem(t);return this.isEmpty(e)?null:JSON.parse(e)},x.prototype.setItem=function(t,e){Q.setItem(t,P(e))},x.prototype.isEmpty=function(t){var e=!1;switch(!0){case typeof t>"u":case(typeof t=="string"&&t===""):case(typeof t=="string"&&t==="undefined"):case(typeof t=="number"&&t===0):case t===null:e=!0;break;default:e=!1}return e},x.prototype.getID=function(t){var e;return typeof t<"u"&&(e="cachedObject_"+K.encode(P(t).replace(/\{|\}|,/g,"_"))),e},x.prototype.save=function(t,e){var n=this.getID(t);s.debug("CACHING THE RESPONSE OF {{cachedObjectID}} ".replace("{{cachedObjectID}}",n)),this.setItem(n,e)},x.prototype.getCached=function(t){var e=this.getID(t);return this.getItem(e)},x.prototype.clear=function(){Object.keys(Q).filter(function(t){return t.startsWith("cachedObject_")}).map(function(t){Q.removeItem(t)})},m){var Oe=!1;try{var qe=Object.defineProperty({},"passive",{get(){return Oe=!0,Oe}});window.addEventListener("testPassive",null,qe),window.removeEventListener("testPassive",null,qe)}catch{}var rt=d(function(){return Oe?{passive:!0}:!1},"captureFalse")}m&&(Element.prototype.find=function(t){var e=[],n=document.subelements(t);return n.map(function(r,o){typeof n[o]<"u"&&n[o].parentNode.tagName===this.parentNode.tagName&&e.push(ae(r,new Object))}),e});var ie,Ot=function(){var t=Object.prototype.hasOwnProperty;return function(e){if(typeof e!="object")throw TypeError("Object prototype may only be an Object or null. The type is "+typeof e);var n=d(function(){},"QCObjects");n.prototype=e;var r=new n;if(arguments.length>1){var o=Object(arguments[1]);for(var i in o)t.call(o,i)&&(r[i]=o[i])}return r}}();typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:d(function(e,n){"use strict";if(e===null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),o=1;o<arguments.length;o++){var i=arguments[o];if(i!==null)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}return r},"assign"),writable:!0,configurable:!0});var Ge=d(function(t){return!!(typeof t=="function"&&t.toString().startsWith("class"))},"__is_raw_class__"),we=d(function(t){var e;switch(!0){case typeof t=="string":e=t;break;case typeof t=="number":e=t;break;case typeof t=="object":e=Object.assign({},t);break;case typeof t=="function":e=t.bind({});break;case Ge(t):e=d(class extends t{},"_value_");break;default:break}return e},"_LegacyCopy"),G={},H={},Ie=[],oe=[],he=d(function(t){var e="";return typeof t=="function"&&Object.hasOwnProperty.call(t,"name")&&t.name!==""?e=t.name:typeof t<"u"&&typeof t.constructor=="function"&&t.constructor.name!==""?e=t.constructor.name:typeof t<"u"&&typeof t.constructor=="object"&&(e=t.constructor.toString().replace(/\[(.*?)\]/g,"$1").split(" ").slice(1).join("")),e},"ObjectName"),ae=d(function(t,e){for(var n in t)if(typeof t[n]<"u")try{e[n]=t[n]}catch{}return e},"_Cast"),ee=d(function(t,e){for(var n in t)if(typeof t[n]<"u"&&typeof t[n]!="function")try{e[n]=t[n]}catch{}else if(typeof t[n]=="function")try{e[n]=t[n].bind(e)}catch(r){s.warn(r)}return e},"_CastProps"),it=d(function(){return["__proto__","prototype","Object","Map","defineProperty","indexOf","toString","__instanceID"].indexOf(arguments[0])!==-1},"__is__forbidden_name__"),W=d(function(e){var n="";switch(!0){case(Ge(e)&&!!e.name):n=e.name;break;case(typeof e=="object"&&!!e.constructor&&!!e.constructor.name&&e.constructor.name!==""):n=e.constructor.name;break;case(!!e&&!!e.__classType&&e.__classType!==""):n=e.__classType;break;case(!!e&&!!e.__definition&&!!e.__definition.__classType&&e.__definition.__classType!==""):n=e.__definition.__classType;break;case(typeof e=="function"&&!!e.name):n=e.name;break;default:n=he(e);break}return n},"__getType__"),te=d(function(e,n){return!!(typeof e<"u"&&e!==null&&((z(e)||se(e))&&e.hierarchy().includes(n)||W(e)===n||he(e)===n||typeof e===n))},"is_a"),Ne=d(function(t){if(typeof t<"u")if(m)try{l[t.name]=t,window[t.name]=t}catch{}else typeof g<"u"&&(Object.hasOwnProperty.call(g,t.name)||(g[t.name]=t))},"__make_global__"),ke=d(function(t,e){var n=t.name||W(t);return t.__definition.__classType=n,typeof e<"u"&&(t.__definition.__namespace=e),G[n]=t,l[n]=G[n],l[n]},"__register_class__"),Ae=d(function(t,e){return ke(t,e)},"RegisterClass");Ne(Ae);var F=d(function(){var t={},e,n,r;switch(arguments.length){case 0:return class{};case 1:e=arguments[0],n=d(class{},"type"),r={};break;case 2:e=arguments[0],n=d(class{},"type"),r=arguments[1];break;case 3:e=arguments[0],n=arguments[1],r=arguments[2];break;default:break}if(typeof n!="function")throw new Error("Class type must be a function or class");if(it.call(this,e))throw new Error(`${e} is not an allowed word in the name of a class`);return typeof n.__definition<"u"&&(r.__definition=Object.assign(we(n.__definition),n)),t[n.name]=n,typeof r>"u"||r===null?r={}:r=we(r),typeof r.__instanceID<"u"&&delete r.__instanceID,G[e]=class extends t[n.name]{__classType=e;__definition={...r};static hierarchy(o){var i=d(function(c){return Object.hasOwnProperty.call(c,"__classType")?c.__classType:W.call(o,c)},"__classType"),a=d(c=>typeof c<"u"&&typeof c.__proto__<"u"&&c.__proto__!==null?(i(c)!==""?[i(c)]:[]).concat(a(c.__proto__)):[],"__hierarchy__proto__");(typeof o>"u"||o===null)&&(o=this);var u=[];return u.push(i(o)),u=u.concat(a(o.__proto__)),u}static getParentClass(){return Object.getPrototypeOf(this.prototype.constructor)}constructor(){var o;arguments.length>0?o={...arguments[0]}:o={},super(o);let i=this;if(ie=typeof ie>"u"||ie===null?0:ie+1,i.__instanceID||Object.defineProperty(i,"__instanceID",{value:ie,writable:!1}),typeof i.__definition<"u"&&Object.keys(i.__definition).filter(function(a){return isNaN(a)&&!["name","__instanceID","__classType","__definition"].includes(a)}).forEach(function(a){typeof i.__definition[a]=="function"?i[a]=i.__definition[a].bind(i):i[a]=i.__definition[a]}),V(G[i.__classType]).map(function(a){i[a.name]=a.bind(i)}),V(i.__definition).map(function(a){i[a.name]=a.bind(i)}),i.body)if(typeof i.__definition>"u"||!Object.hasOwnProperty.call(i.__definition,"body")||typeof i.__definition.body>"u")try{m?i.body=q(i.__definition.__classType):i.body={}}catch{i.body={}}else Object.hasOwnProperty.call(i.__definition,"body")&&(i.body=i.__definition.body);try{if(typeof i.__new__=="function"?i.__new__.call(i,o):typeof super.__new__=="function"&&(i.__new__=super.__new__.bind(i),i.__new__.call(i,o)),typeof i=="object"&&Object.hasOwnProperty.call(i,"_new_")&&typeof i._new_.isCalled>"u")try{i._new_.call(i,o),i._new_.isCalled=!0}catch(a){s.warn(`${i.__classType}._new_() failed with error: ${a}`)}}catch(a){s.warn(a)}}__new__(o){ee(o,this)}_new_(){}getClass(){return Object.getPrototypeOf(this.constructor)}css(o){return typeof this.body<"u"&&this.body.style!=="undefined"&&(s.debug("body style"),this.body.style=ae(o,this.body.style)),this.body.style}hierarchy(){var o=this;return this.getClass().hierarchy(o)}append(i){s.debug("append: start"),te(i,"Component")&&(s.debug("append: child is a Component"),s.debug(`appending the body of ${i.name}`));var i=arguments.length>0?arguments[0]:this.body;typeof this.body<"u"&&(s.debug("append element"),arguments.lenght>0?(s.debug("append to element"),this.body.append(i),typeof this.childs>"u"&&(this.childs=[]),this.childs.push(i)):m&&(s.debug("append to body"),document.body.append(i)))}attachIn(o){if(m)for(var i=document.subelements(o),a=0,u=i.length;a<u;a++)i[a].append(this);else throw new Error("attachIn not yet implemented for non browser platforms")}},G[e]=ee(r,G[e]),G[e].__definition=r,G[e].__definition.__classType=e,G[e].__definition.__new__=d(function(i){ee(i,this)},"__new__"),l[e]=G[e],l[e]},"Class");F.prototype.toString=function(){return"Class(name, type, definition) { [QCObjects native code] }"};var h=d(function(t){var e;if(t!==null&&t.indexOf(".")>-1){var n=t.split(".").slice(0,t.split(".").length-1).join("."),r=t.split(".").slice(-1).join(""),o=L(n),i=typeof o<"u"?o.filter(a=>z(a)&&(a.__definition.__classType===r||typeof a=="function"&&!!a.name)).reverse():[];if(i.length>0)e=i[0];else throw Error(`Class ${t} not found.`)}else t!==null&&Object.hasOwnProperty.call(G,t)&&(e=G[t]);return e},"ClassFactory");m&&(Element.prototype.append=d(function(e){se(e)||typeof e.body<"u"?this.appendChild(e.body):this.appendChild(e)},"QC_Append"),Element.prototype.render=d(function(e){var n=this,r=d(function(o,i){if(typeof document.implementation.createHTMLDocument<"u"){var a=document.implementation.createHTMLDocument("");a.innerHTML=i,a.body.subelements("*").map(function(u){return o.append(u)})}},"_appendVDOM");if(typeof this.innerHTML<"u")try{this.innerHTML+=e}catch{r(n,e)}else r(n,e)},"QC_Render"));var De=d(function(t,e,n){return h(t)[e]},"_super_");De.prototype.toString=function(){return"_super_(className,classMethodName,params) { [QCObjects native code] }"};var M=d(function(t,e){return e=arguments.length>1?e:{},typeof t>"u"?new Object:new t(e)},"New");M.prototype.toString=function(){return"New(QCObjectsClassName, args) { [QCObjects native code] }"};var N=d(function(t){return Ne(t)},"Export");if(N.prototype.toString=function(){return"Export(function or symbol) { [QCObjects native code] }"},!m){var me=d(function(t){let e=k("fs");var n=null;try{var r=[`${l.CONFIG.get("projectPath")}${l.CONFIG.get("relativeImportPath")}`,`${l.CONFIG.get("basePath")}${l.CONFIG.get("relativeImportPath")}`,`${l.CONFIG.get("projectPath")}`,`${l.CONFIG.get("basePath")}`,`${l.CONFIG.get("relativeImportPath")}`,`${process.cwd()}${l.CONFIG.get("relativeImportPath")}`,`${process.cwd()}/node_modules/`+t,`${process.cwd()}/node_modules`,`${process.cwd()}`,"node_modules","./",""].concat(re.paths);r=r.filter(o=>e.existsSync(o+"/"+t)),r.length>0&&(n=r[0],s.info(t+" is Installed."))}catch(o){console.log(o)}return n},"findPackageNodePath");N(me)}F("_Crypt",Object,{last_string:"",last_key:"",construct:!1,_new_(t){var e=t.string,n=t.hasOwnProperty.call(t,"key")?t.key:null;this.__new__(t),n=n===null?this.__instanceID:n,this.last_key=n,this.last_string=e,this.construct=!0},_encrypt(){for(var t=this.string,e=this.key,n="",r,o,i=0;i<t.length;i++)r=t.substr(i,1),o=e.substr(i%e.length-1,1),r=String.fromCharCode(r.charCodeAt(0)+o.charCodeAt(0)),n+=r;return this.last_string=K.encode(n),this.last_string},_decrypt(){var t=this.string,e=this.key,n="",r,o;t=K.decode(t);for(var i=0;i<t.length;i++)r=t.substr(i,1),o=e.substr(i%e.length-1,1),r=String.fromCharCode(r.charCodeAt(0)-o.charCodeAt(0)),n+=r;return this.last_string=n,this.last_string},encrypt(t,e){var n=M(h("_Crypt"),{string:t,key:e!==""?e:"12345678ABC"});return n._encrypt()},decrypt(t,e){var n=M(h("_Crypt"),{string:t,key:e!==""?e:"12345678ABC"});return n._decrypt()}});var ot=d(function(t){return h("_Crypt").encrypt(P(t),Z)},"_CryptObject"),Fe=d(function(t){return t===""?{}:JSON.parse(h("_Crypt").decrypt(t,Z))},"_DecryptObject"),xe=d(function(){var t=1e3,e=h("_Crypt").encrypt((Math.random()*t).toString().replace(".",""),new Date().getTime().toString()),n=h("_Crypt").encrypt((Math.random()*t).toString().replace(".",""),new Date(new Date().getTime()-1e3*1e3).getTime().toString()),r=n.list().map((o,i)=>e.list()[i]===o?null:o).filter(o=>o!==null).join("");return r},"shortCode"),wt=xe;F("InheritClass",class{},{});class E extends h("InheritClass"){component=null;__definition={};__classType="Processor";static processors={config(e,n){return l.CONFIG.get(n,"")},ENV(e,n){return typeof process<"u"?process.env[n]:""},global(e,n){return typeof g<"u"?g[n]:""}};static setProcessor(e){typeof e=="function"&&e.name!==""&&(this.processors[e.name]=e)}constructor(){super(...arguments),this.processors=E.processors,this.process=E.process.bind(this),this.processObject=E.processObject.bind(this),this.setProcessor=E.setProcessor.bind(this),this.execute=E.execute.bind(this)}static execute(e,n,r){var o=typeof e<"u"&&e!==null?e.processorHandler:this;return o.processors[n].bind(o).apply(o,[e,...r.split(",")])}static process(e,n=null){var r=n!==null?n.processorHandler:M(E,{component:null});return typeof e=="string"&&Object.keys(r.processors).map(function(o){[...e.matchAll(new RegExp("\\$"+o+"\\((.*)\\).*","g"))].map(function(i){var a=`$${o}(${i[1]})`;e=e.replace(a,r.execute.bind(r).call(r,n,o,i[1]))})}),e}static processObject(e,n=null){var r=n===null?this:n.processorHandler;return typeof r>"u"&&(r=new E({component:n})),typeof e=="object"?Object.keys(e).map(function(o){typeof e[o]=="object"&&!e[o].hasOwnProperty.call(e[o],"call")?e[o]=r.processObject.bind(r)(e[o],n):typeof e[o]=="string"&&(e[o]=r.process.bind(r)(e[o],n))}):typeof e=="string"&&(e=r.process.bind(r)(e,n)),e}}d(E,"Processor"),E.__definition={},E.__classType="Processor",Ae(E,"com.qcobjects"),Ne(E);class be{static _instance=null;static _CONFIG_ENC=null;static get instance(){if(this._instance===null){var e=new be;e._CONFIG={relativeImportPath:"",remoteImportsPath:"",remoteSDKPath:"https://sdk.qcobjects.dev/v2.4/",asynchronousImportsLoad:!1,removePackageScriptAfterLoading:!0,componentsBasePath:"",delayForReady:0,preserveComponentBodyTag:!1,useConfigService:!1,routingWay:"hash",useSDK:!0,useLocalSDK:!1,basePath:U},e._CONFIG_ENC=null,this._instance=e}return this._instance}static set instance(e){this._instance=e}}d(be,"ConfigSettings"),G.ConfigSettings=be,F("CONFIG",Object,{get _CONFIG_ENC(){return h("ConfigSettings").instance._CONFIG_ENC},get _CONFIG(){return h("ConfigSettings").instance._CONFIG},set(t,e){s.debug(`CONFIG.set  ${t}: ${e}`),t==="basePath"&&(U=e);var n;try{n=function(r){r._CONFIG_ENC===null&&(r._CONFIG_ENC=h("_Crypt").encrypt(P({}),Z));var o=r._CONFIG_ENC.valueOf(),i=r._CONFIG.valueOf();return ee(i,Fe(o))}(h("ConfigSettings").instance)}catch(r){n={},console.error(r),s.debug("failed to encrypt config")}n[t]=e,h("ConfigSettings").instance._CONFIG_ENC=ot(n),Object.hasOwnProperty.call(h("ConfigSettings").instance,"_CONFIG")&&Object.hasOwnProperty.call(h("ConfigSettings").instance._CONFIG,t)&&(h("ConfigSettings").instance._CONFIG[t]=e)},get(t,e){var n;try{var r=function(o){o._CONFIG_ENC===null&&(o._CONFIG_ENC=h("_Crypt").encrypt(P({}),Z));var i=o._CONFIG_ENC.valueOf(),a=o._CONFIG.valueOf();return ee(a,Fe(i))}(h("ConfigSettings").instance);typeof r[t]<"u"?n=r[t]:typeof e<"u"&&(n=e)}catch(o){console.error(o),s.debug("Something wrong when trying to get CONFIG values"),s.debug("No config value for: "+t),n=e}return E.processObject.call(E,n)}}),N(nt),N(De),N(x),N(h),N(q),N(xe),N(W),N(te);var se=d(function(t){return!!(typeof t=="object"&&Object.hasOwnProperty.call(t,"__classType")&&t.__instanceID&&Object.hasOwnProperty.call(t,"__definition")&&typeof t.__definition<"u")},"isQCObjects_Object"),z=d(function(t){return!!(typeof t=="function"&&!t.__instanceID&&t.__definition&&typeof t.__definition<"u"&&t.__definition.__classType)},"isQCObjects_Class"),L=d(function(t,e){return H.hasOwnProperty.call(H,t)&&typeof H[t]<"u"&&H[t].hasOwnProperty.call(H[t],"length")&&H[t].length>0&&typeof e<"u"&&e.hasOwnProperty.call(e,"length")&&e.length>0?(e.filter(function(n){return z(n)}).map(function(n){n.__definition.__namespace=t,n.__namespace=t}),H[t]=H[t].concat(e)):typeof e<"u"&&(typeof e=="object"&&e.hasOwnProperty.call(e,"length")?e.filter(function(n){return z(n)}).map(function(n){n.__definition.__namespace=t,n.__namespace=t}):z(e)&&(e.__definition.__namespace=t,e.__namespace=t),H[t]=e),Object.hasOwnProperty.call(H,t)&&H[t].map(function(n){ke(n,t)}),Object.hasOwnProperty.call(H,t)?H[t]:void 0},"Package");L.prototype.toString=function(){return"Package(namespace, classes) { [QCObjects native code] }"},L("com.qcobjects",[E]);var at=d(function(t){let n=L(t).filter(r=>z(r)).map(r=>({[r.__definition.__classType]:r})).reduce((r,o)=>Object.assign(r,o));return t.split(".").map(r=>({[r]:n})).reverse().reduce((r,o)=>(o[Object.keys(o)]=r,o))},"NamespaceRef"),Te=d(function(){var t,e=d(function(){},"ready"),n=!1;if(!(arguments.length<1)){arguments.length===1?t=arguments[0]:arguments.length===2?(t=arguments[0],e=arguments[1]):arguments.length>2&&(t=arguments[0],e=arguments[1],n=arguments[2],s.debug("[Import] Setting external="+n.toString()+" resource to import: "+t)),n?s.debug("[Import] Registering external resource to import: "+t):s.debug("[Import] Registering local resource to import: "+t);var r;return m?(r=new Promise(function(o,i){var a=d(function(){var f=!1,p=0;for(var b in H)p++;return p<Ie.length?f=!1:f=!0,f},"allPackagesImported"),u=d(function(f){Ie.push(e),a()&&Ie.map(function(p){oe.push(p)}),m&&l.CONFIG.get("removePackageScriptAfterLoading")&&f.target.remove(),o.call(r,{_imported_:f.target,_package_name_:t})},"readyImported");if(!H.hasOwnProperty.call(H,t)){var c=q("script");c.type=l.CONFIG.get("sourceType","text/javascript"),c.async=!!l.CONFIG.get("asynchronousImportsLoad"),c.onreadystatechange=function(){c.readyState==="complete"&&u.call()},c.onload=u,c.onerror=function(f){i.call(r,{_imported_:c,_package_name_:t})},c.src=n?l.CONFIG.get("remoteImportsPath")+t+".js":U+l.CONFIG.get("relativeImportPath")+t+".js",document.getElementsByTagName("head")[0].appendChild(c)}}),r.catch(function(){s.debug("Import: Error loading a package ")})):r=new Promise(function(o,i){try{var a=me(t),u="";if(a!==null)u=a+"/"+t;else{var c=me(t+".js");c!==null?u=c+"/"+t+".js":u=U+l.CONFIG.get("relativeImportPath")+t}try{o.call(r,{_imported_:k(`${u}`),_package_name_:t})}catch(f){i.call(r,{_imported_:null,_package_name_:t,error:f})}}catch(f){i.call(r,{_imported_:null,_package_name_:t,error:f})}}).catch(function(o){s.debug("Something happened when importing "+t),console.warn(o)}),r.catch(function(o){s.warn(P(o))}),r}},"Import");Te.prototype.toString=function(){return"Import(packagename,ready,external) { [QCObjects native code] }"},m&&(Element.prototype.Cast=d(function(n){n.__definition.body=this;var n=M(n);return n},"QC_Object")),F("TagElements",Array,{show(){this.map(function(t){return t.style.opacity=1})},hide(){this.map(function(t){return t.style.opacity=0})},effect(){var t=[...arguments].slice(1),e=arguments[0];(typeof e).toLowerCase()==="string"&&(e=h(e)),this.map(function(n){return e.apply.apply(e,[n].concat(t))})},findElements(t){var e=M(h("TagElements"));if(m)for(var n in this)typeof n=="number"&&typeof this[n]!="function"&&this[n].hasOwnProperty.call(this[n],"subelements")&&e.push(this[n].subelements(t));return e}});var st=d(function(t,e){var n=M(h("TagElements"));if(m)for(var r=document.subelements(t),o=[],i=0;i<r.length;i++)typeof e<"u"&&r[i].hasOwnProperty.call(r[i],"innerHTML")&&(r[i].innerHTML=e),o.indexOf(i)<0&&(n.push(r[i]),o.push(i));return n},"Tag"),ut=ue,Ce=d(function(t){var e=d(function(){oe.map(function(n,r){typeof n=="function"&&(n.call(),delete oe[r])})},"_execReady");l.CONFIG.get("delayForReady")>0?m?setTimeout(e.bind(window),l.CONFIG.get("delayForReady")):typeof g<"u"&&setTimeout(e.bind(g),l.CONFIG.get("delayForReady")):e.call(l)},"_Ready");m?(window.onload=Ce,$e&&document.addEventListener("deviceready",Ce,rt)):g.onload=Ce;class ze extends h("InheritClass"){constructor({instance:e,name:n,fget:r,fset:o,value:i}){super({instance:e,name:n,fget:r,fset:o,value:i}),this._new_({instance:e,name:n,fget:r,fset:o,value:i})}_new_({instance:e,name:u,fget:r,fset:o,value:i}){var a=this,u=typeof u>"u"?he(a):u;Object.defineProperty(e,u,{set(c){let f=c;s.debug("value changed "+u);var p;typeof o<"u"&&typeof o=="function"?p=o(f):p=f,e["_"+u]=p},get(){let c=e["_"+u];s.debug("returning value "+u);var f=d(function(b){return typeof b=="object"&&Object.hasOwnProperty.call(b,"value")?b.value:b},"is_ddo"),p;return typeof r<"u"&&typeof r=="function"?p=r(f(c)):p=f(c),p}})}}d(ze,"DDO"),N(ze);class Re{template="";__definition={};constructor({component:e,template:n}){this.component=e,this.template=n}assign(e){var n=this;if(typeof n.component>"u")throw new Error("DefaultTemplateHandler.assign: component is undefined");if(typeof n.component.processorHandler>"u")throw new Error("DefaultTemplateHandler.assign: component.processorHandler is undefined");var r=n.component.processorHandler;r.component=n.component;var o=typeof n.template<"u"?n.template:"";typeof e=="object"?[...Object.keys(e)].map(function(i){var a=e[i];if(typeof a=="string"||typeof a=="number"||!isNaN(a))try{a=E.processObject.bind(r).call(r,a,n.component),o=o.replace(new RegExp(`{{${i}}}`,"g"),a)}catch(u){throw s.warn(`${n.component.name} could not parse processors.`),Error(`${n.component.name} could not parse processors. Reason: ${u.message}`)}}):s.debug(`${n.component.name}.data is not an object`);try{o=E.processObject.call(r,o,n.component)}catch(i){throw s.warn(`${n.component.name} could not parse processors.`),Error(`${n.component.name} could not parse processors. Reason: ${i.message}`)}return o}}d(Re,"DefaultTemplateHandler"),Re.__definition={},Ae(Re,"com.qcobjects");var ct=d(function(t,e){let n=t.path.replace(/{(.*?)}/g,"(?<$1>.*)");return{...[...e.matchAll(new RegExp(n,"g"))][0].groups}},"__routing_params__"),lt=d(function(t,e){return t.filter(function(n){var r=n.path.replace(/{(.*?)}/g,"(?<$1>.*)");return new RegExp(r,"g").test(e)}).reverse()},"__valid_routings__"),Ue=d(function(t,e){return t.includes(e)},"__valid_routing_way__"),dt=d(function(t,e){var n=t.getAttribute("shadowed")===null,r=t.getAttribute("template-source")===null,o=t.getAttribute("shadowed")==="true",i=t.getAttribute("cached")===null,a=t.getAttribute("cached")==="true",u=typeof l.CONFIG.get("tplextension")<"u"?l.CONFIG.get("tplextension"):"html";u=t.getAttribute("tplextension")!==null?t.getAttribute("tplextension"):u;var c=t.getAttribute("name"),f=t.getAttribute("componentClass")!==null?t.getAttribute("componentClass"):"Component";let p=l.CONFIG.get("preserveComponentBodyTag")?c!==null?"com.qcobjects.components."+c+".ComponentBody":"com.qcobjects.components.ComponentBody":f;c=c!==null?c:h(p)&&typeof h(p).name<"u"?h(p).name:"";var b=h(p),y=p!=="Component"&&typeof b<"u"&&typeof b.tplsource=="string"&&b.tplsource!=="",w=r&&y?b.tplsource:r?"default":t.getAttribute("template-source");s.debug(`template source for  ${c} is ${w} `),s.debug(`type for ${c} is ${W(b)} `);var A;A=je({COMPONENTS_BASE_PATH:l.CONFIG.get("componentsBasePath"),COMPONENT_NAME:c,TPLEXTENSION:u,TPL_SOURCE:w}),l.CONFIG.get("preserveComponentBodyTag")&&L(c!==""?"com.qcobjects.components."+c:"com.qcobjects.components",[F("ComponentBody",h("Component"),{name:c,tplsource:w,tplextension:u,reload:!0})]);var v=d(function(){var j=n?b&&b.shadowed||h("Component").shadowed:o,S={__parent__:e,name:c,cached:i?h("Component").cached:a,shadowed:j,tplextension:u,body:l.CONFIG.get("preserveComponentBodyTag")?q("componentBody"):t,templateURI:A,tplsource:w};(typeof c>"u"||c===""||c===null)&&delete S.name,A===""&&delete S.templateURI;var O=M(b,S);return l.CONFIG.get("preserveComponentBodyTag")&&t.append(O),O},"__create_component_instance_"),_=v.call(this);return _},"_buildComponentFromElement_"),We=d(function(t,e){var n=[];return m?n=t.map(function(r){return dt(r,e)}):s.debug("[_buildComponentsFromElements_] not implemented for Non-Browser environments"),n},"_buildComponentsFromElements_");L("com.qcobjects",[d(class extends h("InheritClass"){validRoutingWays=["pathname","hash","search"];basePath=U;domain=B;templateHandler="DefaultTemplateHandler";processorHandler=null;routingWay=null;routingNodes=[];routings=[];routingPath="";routingPaths=[];_componentHelpers=[];subcomponents=[];splashScreenComponent=void 0;controller=void 0;view=void 0;effect=void 0;method="GET";cached=!0;__promise__=null;__namespace=void 0;constructor({templateURI:e="",template:n,tplsource:r="default",url:o="",name:i="",method:a="GET",data:u={},reload:c=!1,shadowed:f=!1,cached:p=!0,_body:b=q("div"),__promise__:y=null,__shadowRoot:w,body:A,shadowRoot:v,splashScreenComponent:_,controller:j,view:S}){super(...arguments);var O=this;typeof O.name>"u"&&s.warn("A name is not defined for "+W(O)),O.routingWay=l.CONFIG.get("routingWay"),O.processorHandler=M(E,{component:O}),O.data=typeof O.data>"u"||O.data===null?{}:O.data,O.data=Object.assign(O.data,O.dataAttributes),O.createServiceInstance().then(function(J){typeof O.__new__=="function"&&O.__new__.call(O,O),O._generateRoutingPaths(O.body).then(function(){O._reroute_().then(function(){return O.rebuild().then(function(){s.info(`Component._new_ The component ${O.name} was built successfully!`)}).catch(function(ce){s.warn(`Component._new_ Something went wrong building the component ${O.name}`),console.error(ce)})})})})}set body(e){var n=this;n._body=e}get body(){var e=this;return e._body}set cacheIndex(e){s.debug("[cacheIndex] This property is readonly")}get cacheIndex(){var e=this,n=P(e.routingPath);return K.encode(e.name+n)}set parsedAssignmentText(e){s.debug("[parsedAssignmentText] This property is readonly")}get parsedAssignmentText(){var e=this;if(e._parsedAssignmentText=e.parseTemplate(e.template),typeof e._parsedAssignmentText>"u")throw Error(`[Component][${this.name}][parsedAssignmentText] Could not generate content!`);return e._parsedAssignmentText}set shadowRoot(e){var n=this;typeof n.__shadowRoot>"u"?n.__shadowRoot=e:s.debug("[shadowRoot] This property can only be assigned once!")}get shadowRoot(){var e=this;return e.__shadowRoot}set routingSelected(e){s.debug("[routingSelected] This is a read-only property of the component")}get routingSelected(){var e=this;return lt(e.routings,e.routingPath)}set routingParams(e){s.debug("[routingParams] This is a read-only property of the component")}get routingParams(){var e=this;return[{}].concat(e.routingSelected.map(function(n){return ct(n,e.routingPath)})).reduce(function(n,r,o){return Object.assign(n,r)})}createServiceInstance(){var e=this,n=e.body,r=this.data,o,i=e.getClass().__definition,a=m&&n.getAttribute("serviceClass")!==null?n.getAttribute("serviceClass"):null;return new Promise(function(u,c){var f=!!(Object.hasOwnProperty.call(n,"enableServiceClass")&&n.enableServiceClass||!Object.hasOwnProperty.call(n,"enableServiceClass")),p=!!(m&&n.getAttribute("response-to")!==null&&n.getAttribute("response-to")==="data"),b=!!(m&&n.getAttribute("response-to")!==null&&n.getAttribute("response-to")==="template");if(f&&a!==null&&(o=h(a)),!p&&i&&Object.hasOwnProperty.call(i,"responseTo")?p=i.responseTo==="data":!p&&Object.hasOwnProperty.call(h("Component"),"responseTo")&&(p=h("Component").responseTo==="data"),!b&&i&&Object.hasOwnProperty.call(i,"responseTo")?b=i.responseTo==="template":!b&&Object.hasOwnProperty.call(h("Component"),"responseTo")&&(b=h("Component").responseTo==="template"),typeof o<"u"&&typeof f<"u"&&f===!0&&(p||b)){s.info("Loading service "+a);var y=M(o,{data:r});Pe(y).then(function({request:w,service:A}){var v;typeof A.JSONresponse<"u"&&A.JSONresponse!==null?v=A.JSONresponse:v=A.template,p&&(typeof r=="object"&&typeof v=="object"?r=Object.assign(r,v):r=v,e.data=r),e.serviceInstance=y,e.serviceData=r,b&&(e.template=v),u(v)},function(w){s.debug(`Service loading rejected for ${a} in ${e.name}`),c(w)}).catch(function(w){throw s.debug("Something went wroing while trying to load the service "+a),Error(`Error loading ${a} for ${e.name}. Detail: ${w}`)})}else u(null)})}_bindroute_(){var e=this;e._bindroute_.loaded?s.debug(`Routes already bound to popstate events for ${e.name}`):(m&&e.hostElements("a").map(function(n){return n.oldclick=n.onclick,n.onclick=function(r){var o=!0;l.global.get("routingPaths")||l.global.set("routingPaths",[]);var i=l.CONFIG.get("routingWay"),a=r.target[i];return l.global.get("routingPaths").includes(a)&&r.target[i]!==document.location[i]&&r.target.href!==document.location.href?(s.debug("A ROUTING WAS FOUND: "+a),window.history.pushState({href:r.target.href},r.target.href,r.target.href),h("Component").route(),o=!1):s.debug("NO ROUTING FOUND FOR: "+a),typeof r.target.oldclick<"u"&&typeof r.target.oldclick=="function"&&r.target.oldclick.call(r.target,r),o},null}),this._bindroute_.loaded=!0)}done(e){var n;if(typeof e<"u"){var{request:r,component:o}=e;n=Promise.resolve({request:r,component:o})}return n}createControllerInstance(){var e;if(m){if(typeof this.body>"u")throw new Error("The component has no body");var n=this.body.getAttribute("controllerClass");n||(n="Controller"),e=h(n),typeof e<"u"&&(this.controller=M(e,{component:this}))}return new Promise((r,o)=>{if(m&&typeof e<"u"&&typeof this.controller<"u"){if(typeof this.controller.done=="function")try{this.controller.done.call(this.controller)}catch(i){throw Error(i)}else s.debug(`${n} does not have a done() method.`),o(`${n} does not have a done() method.`);typeof this.controller.createRoutingController=="function"?this.controller.createRoutingController.call(this.controller):s.debug(`${n} does not have a createRoutingController() method.`)}r({component:this,controller:this.controller})})}createEffectInstance(){var e=this;return new Promise(function(n,r){if(m){var o=e.body.getAttribute("effectClass"),i=e.body.getAttribute("apply-effect-to");i=i!==null?i:"load",o!==null&&i==="observe"?e.applyObserveTransitionEffect(o):o!==null&&i==="load"&&e.applyTransitionEffect(o)}n({component:e,effect:e.effect})})}createViewInstance(){var e=this;return new Promise(function(n,r){var o=m?e.body.getAttribute("viewClass"):null;if(o!==null){var i=h(o);typeof i<"u"&&(e.view=M(i,{component:e}),Object.hasOwnProperty.call(e.view,"done")&&typeof e.view.done=="function"&&e.view.done.call(e.view))}n({component:e,view:e.view})})}__done__(){var e=this,n=d(function(){if(typeof e>"u")throw new Error("componentDone() has lost its context");if(typeof e.body>"u")throw new Error("The component has no body");e.createViewInstance(),e.createControllerInstance(),e.createEffectInstance(),s.debug(`Trying to run component helpers for ${e.name}...`);try{e.runComponentHelpers(),s.debug(`Component helpers for ${e.name} executed.`)}catch(r){throw s.debug(`Component helpers for ${e.name} could not be executed.`),Error(r)}e.subcomponents=e.__buildSubComponents__(),e._bindroute_(),e.body.setAttribute("loaded",!0)},"componentDone");return new Promise(function(r,o){try{Promise.resolve(n.call(e))}catch(i){o(i)}})}hostElements(e){var n=this,r=n.shadowed&&typeof n.shadowRoot<"u"?n.shadowRoot.subelements(e):n.body.subelements(e);return r}get subtags(){var e=this,n=He;return e.hostElements(n)}get bodyAttributes(){var e=this,n=e.body;return m?[...n.getAttributeNames()].map(r=>({[r]:n.getAttribute(r)})).reduce((r,o,i)=>Object.assign(r,o)):{}}get dataAttributes(){var e=this,n=e.body;return m?[{}].concat([...n.getAttributeNames()].filter(r=>r.startsWith("data-")).map(r=>({[r.split("-")[1]]:n.getAttribute(r)}))).reduce((r,o,i)=>Object.assign(r,o)):{}}__buildSubComponents__(e=!1){var n=this,r=n.subtags;return e||(r=r.filter(o=>o.getAttribute("loaded")!=="true")),(typeof n<"u"||n.subcomponents.length<1)&&(n.subcomponents=We(r,n)),n.subcomponents}fail(e){var n;if(typeof e<"u"){var{error:r,component:o}=e;n=Promise.resolve({error:r,component:o})}return n}set(e,n){this[e]=n}get(e){return this[e]}feedComponent(){var e=this;s.debug(`[Component][${this.name}][feedComponent] start feeding component...`);var n=d(function(i){if(typeof i.container>"u"&&typeof i.body>"u"){s.warn("COMPONENT {{NAME}} has an undefined container and body".replace("{{NAME}}",i.name));return}var a=typeof i.container>"u"||i.container===null?i.body:i.container,u=i.parsedAssignmentText;if(i.innerHTML=u,i.shadowed){s.debug("COMPONENT {{NAME}} is shadowed".replace("{{NAME}}",i.name)),s.debug("Preparing slots for Shadowed COMPONENT {{NAME}}".replace("{{NAME}}",i.name));var c=q("div");a.subelements("[slot]").map(function(b){b.parentElement===a&&c.appendChild(b)}),s.debug("Creating shadowedContainer for COMPONENT {{NAME}}".replace("{{NAME}}",i.name));var f=q("div");f.classList.add("shadowHost");try{i.shadowRoot=f.attachShadow({mode:"open"})}catch{try{s.debug("Shadowed COMPONENT {{NAME}} is repeated".replace("{{NAME}}",i.name)),i.shadowRoot=f.shadowRoot}catch{s.warn("Shadowed COMPONENT {{NAME}} is not allowed on this browser".replace("{{NAME}}",i.name))}}if(typeof i.shadowRoot<"u"&&i.shadowRoot!==null){i.reload?(s.debug("FORCED RELOADING OF CONTAINER FOR Shadowed COMPONENT {{NAME}}".replace("{{NAME}}",i.name)),f.shadowRoot.innerHTML=i.innerHTML):(c.innerHTML=i.parseTemplate(c.innerHTML),s.debug("ADDING Shadowed COMPONENT {{NAME}} ".replace("{{NAME}}",i.name)),f.shadowRoot.innerHTML+=i.innerHTML),s.debug("ADDING Slots to Shadowed COMPONENT {{NAME}} ".replace("{{NAME}}",i.name)),f.innerHTML+=c.innerHTML,s.debug("APPENDING Shadowed COMPONENT {{NAME}} to Container ".replace("{{NAME}}",i.name));var p=a.querySelector(".shadowHost");typeof p<"u"&&p!==null?(s.debug("Shadowed Container for COMPONENT {{NAME}} is already present in the tree ".replace("{{NAME}}",i.name)),i.shadowRoot.innerHTML=f.shadowRoot.innerHTML):a.appendChild(f)}else s.warn("Shadowed COMPONENT {{NAME}} is bad configured".replace("{{NAME}}",i.name))}else i.reload?(s.debug("FORCED RELOADING OF CONTAINER FOR COMPONENT {{NAME}}".replace("{{NAME}}",i.name)),a.innerHTML=i.innerHTML):a&&i?(s.debug("ADDING COMPONENT {{NAME}} ".replace("{{NAME}}",i.name)),a.innerHTML+=i.innerHTML):s.warn("COMPONENT {{NAME}} is not added to the DOM".replace("{{NAME}}",i.name))},"_feedComponent_InBrowser"),r=d(function(i){var a=i.parsedAssignmentText;i.innerHTML=a},"_feedComponent_InNode"),o;if(!te(e,"Component")){s.warn("Trying to feed a non component object");return}return m?o=n(e):o=r(e),o}rebuild(){var e=this,n=new Promise(function(r,o){if((typeof e>"u"||e===null)&&o("Component is undefined"),se(e)&&te(e,"Component"))switch(!0){case e.get("tplsource")==="none":s.debug("Component "+e.name+" has specified template-source=none, so no template load was done");var i={request:null,component:e};e.__done__().then(function(){typeof e.done=="function"&&e.done.call(e,i),r.call(n,i)},function(){o.call(n,i)});break;case e.get("tplsource")==="inline":s.debug("Component "+e.name+" has specified template-source=inline, so it is assumed that template is already declared"),async function(a){a.feedComponent.bind(a)()}(e);var i={request:null,component:e};e.__done__().then(function(){typeof e.done=="function"&&e.done.call(e,i),r.call(n,i)},function(){o.call(n,i)});break;case(e.get("tplsource")==="default"&&e.get("templateURI")!==""):e.set("url",e.get("basePath")+e.get("templateURI")),Ee(e,!1).then(function(a){r.call(n,a)},function(a){o.call(n,a)});break;case(e.get("tplsource")==="external"&&e.get("templateURI")!==""):e.set("url",e.get("templateURI")),Ee(e,!1).then(function(a){r.call(n,a)},function(a){o.call(n,a)});break;case(e.get("tplsource")==="default"&&e.get("templateURI","")===""):s.debug(`Component ${e.name} template-source is ${e.get("tplsource")} and no templateURI is present`),o.call(n,`Component ${e.name} template-source is ${e.get("tplsource")} and no templateURI is present`);break;default:s.debug("Component "+e.name+" will not be rebuilt because no templateURI is present"),o.call(n,{request:null,component:e});break}});return n}Cast(e){let n=V(e).map(r=>r.name.replace(/bound /g,"")).map(r=>({[r]:e[r].bind(this)})).reduce((r,o)=>Object.assign(r,o),{});return ae(this,n)}static route(){var e=this,n,r=!!(se(e)&&te(e,"Component")),o=d(function(i){var a=[],u=i.filter(function(c){return typeof c<"u"}).map(function(c){if(typeof c.name<"u")a.push(c.name);else throw new Error(W(c)+" does not have a name");return new Promise(function(f,p){var b;return typeof c<"u"&&c._reroute_?b=c._reroute_().then(function(){return c.reload=!0,c.rebuild()}).then(function(y){if(Object.hasOwnProperty.call(c,"subcomponents")&&typeof c.subcomponents<"u"&&c.subcomponents.length>0)return s.debug("LOOKING FOR ROUTINGS IN SUBCOMPONENTS FOR: "+c.name),o.call(c,c.subcomponents);s.debug("No subcomponents to look for routings in: "+c.name),c.subtags.length>0&&(c.subcomponents=c.__buildSubComponents__(!0)),f(c)}):typeof c<"u"&&p("Component "+c.name+" is not an instance of Component"),b})});return Promise.all(u).then(function(){s.debug("ROUTING COMPLETED FOR "+a.join(", "))}).catch(function(c){s.warn("ROUTING FAILED FOR "+a.join(", ")+": "+c)})},"__route__");if(r||l.componentsStack)r&&s.debug("loading routings for instance "+e.name),n=o.call(e,r?e.subcomponents:l.componentsStack);else throw s.debug("An undetermined result expected if load routings. So will not be loaded this time."),Error("There is no valid instance and no components stack available to apply rountings");return n}fullscreen(){if(m){var e=this.body;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}closefullscreen(){m&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}_generateRoutingPaths(e){var n=this;return new Promise(function(r,o){m&&Ue(n.validRoutingWays,n.routingWay)&&typeof e<"u"&&(n.innerHTML=e.innerHTML,n.routingNodes=e.subelements("routing"),n.routings=[],n.routingNodes.map(function(i,a){var u=i.getAttributeNames(),c={};u.map(function(f,p){c[u[p]]=i.getAttribute(u[p])}),n.routings.push(c),n.routingPaths||(n.routingPaths=[]),n.routingPaths.includes(c.path)||n.routingPaths.push(c.path),l.global.get("routingPaths")||l.global.set("routingPaths",[]),l.global.get("routingPaths").includes(c.path)||l.global.get("routingPaths").push(c.path)})),r()})}parseTemplate(e){var n=this,r,o=e;if(Object.hasOwnProperty.call(n,"templateHandler")){var i=n.templateHandler;s.debug(`[Component][${this.name}][parseTemplate] Attempting to use ${i} ...`);var a=h(i),u=M(a,{component:n,template:o});u.component=n;var c=n.data;if(Object.hasOwnProperty.call(n,"assignRoutingParams")&&n.assignRoutingParams)try{c=Object.assign(c,n.routingParams)}catch{s.debug("[parseTemplate] it was not possible to assign the routing params to the template")}r=u.assign(c)}else s.debug(`[Component][${this.name}][parseTemplate] No value for templateHandler. Using raw content...`),r=o;return r}_reroute_(){var e=this;return new Promise(function(n,r){m&&Ue(e.validRoutingWays,e.routingWay)&&(e.routingPath=document.location[e.routingWay],e.routingSelected.map(function(o,i){var a=je({COMPONENTS_BASE_PATH:l.CONFIG.get("componentsBasePath"),COMPONENT_NAME:o.name.toString(),TPLEXTENSION:Object.hasOwnProperty.call(o,"tplextension")?o.tplextension:e.tplextension,TPL_SOURCE:"default"});e.templateURI=a}),e.routingSelected.length>0&&(e.template="",e.body.innerHTML="")),n(e)})}lazyLoadImages(){if(m){var e=this,n=e.shadowed?e.shadowRoot:e.body,r=[...n.subelements("img[lazy-src]")],o=d(function(a){a.setAttribute("src",a.getAttribute("lazy-src")),a.onload=()=>{a.removeAttribute("lazy-src")}},"_lazyLoadImages");if("IntersectionObserver"in window){var i=new IntersectionObserver((a,u)=>{a.forEach(c=>{c.isIntersecting&&(o(c.target),u.unobserve(c.target))})});r.map(function(a){return i.observe(a)})}else r.map(o)}return null}applyTransitionEffect(e){var n=h(e);if(typeof n>"u")throw Error(`${e} not found.`);typeof n<"u"&&te(n,"TransitionEffect")?(this.effect=M(n,{component:this}),this.effect.apply(this.effect.defaultParams)):s.debug(`${e} is ${W(n)} but is not a TransitionEffect`)}applyObserveTransitionEffect(e){if(m){var n=this,r=n.shadowed?n.shadowRoot.host:n.body,o=d(function(a){n.applyTransitionEffect(e)},"_applyEffect_");if("IntersectionObserver"in window){var i=new IntersectionObserver((a,u)=>{a.forEach(c=>{c.isIntersecting&&(o(c.target),u.unobserve(c.target))})});i.observe(r)}else o(r)}return null}scrollIntoHash(){if(m){var e=this;if(document.location.hash!==""){var n=e.shadowed?e.shadowRoot:e.body;n.subelements(document.location.hash).map(function(r){typeof r.scrollIntoView=="function"&&r.scrollIntoView(l.CONFIG.get("scrollIntoHash",{behavior:"auto",block:"top",inline:"top"}))})}}}i18n_translate(){if(m&&l.CONFIG.get("use_i18n")){var e=this,n=e.shadowed?e.shadowRoot:e.body,r=l.CONFIG.get("lang","en"),o=navigator.language.slice(0,2),i=l.global.get("i18n");if(r!==o&&typeof i=="object"&&Object.hasOwnProperty.call(i,"messages")){var a=d(function(){var u=this;return new Promise(function(c,f){var p=i.messages.filter(function(b){return Object.hasOwnProperty.call(b,r)&&Object.hasOwnProperty.call(b,o)});n.subelements("ul,li,h1,h2,h3,a,b,p,input,textarea,summary,details,option,component").map(function(b){return p.map(function(y){var w=b.innerHTML;return w=w.replace(new RegExp(`${y[r]}`,"g"),y[o]),b.innerHTML=w,null}),b}),c()})},"callback_i18n");a.call(e).then(function(){s.debug("i18n loaded for component: "+e.name)})}}}addComponentHelper(e){var n=this;n._componentHelpers.push(e)}runComponentHelpers(){if(m){var e=this,n=[];n.push(e.i18n_translate.bind(e)),n.push(e.scrollIntoHash.bind(e)),n.push(e.lazyLoadImages.bind(e)),n=n.concat(e._componentHelpers),n.map(function(r){s.debug(`Executing ${r.name} as component helper for ${e.name}...`),r()})}}},"Component")]),V(h("Component")).map(function(t){I(t)}),m&&window.addEventListener("popstate",function(t){t.stopImmediatePropagation(),t.stopPropagation(),h("Component").route()}),L("com.qcobjects.controllers",[d(class extends h("InheritClass"){component=null;dependencies=[];constructor({component:e,dependencies:n}){if(super({component:e,dependencies:n}),this.component=e,this.dependencies=n,typeof this.component>"u"||this.component==="null")throw Error(`${W(this)} must be called with a component`)}routingSelectedAttr(e){return this.component.routingSelected.map(function(n){return n[e]}).filter(function(n){return n}).pop()}isTouchable(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0}onpress(e,n){try{this.isTouchable()?this.component.body.subelements(e)[0].addEventListener("touchstart",n,{passive:!0}):this.component.body.subelements(e)[0].addEventListener("click",n,{passive:!0})}catch{s.debug("No button to assign press event")}}createRoutingController(){var e=this,n=e.component,r=e.routingSelectedAttr("controllerclass");if(typeof r<"u"){var o=h(r);typeof o<"u"&&(n.routingController=M(o,{component:n}),Object.hasOwnProperty.call(n.routingController,"done")&&typeof n.routingController.done=="function"&&n.routingController.done.call(n.routingController))}}done(){}},"Controller")]),L("com.qcobjects.views",[d(class extends h("InheritClass"){constructor({component:e=void 0,dependencies:n=[]}){if(super(...arguments),typeof this.component>"u"||this.component==="null")throw Error(`${W(this)} must be called with a component`)}},"View")]),L("com.qcobjects.api",[d(class extends h("InheritClass"){kind="rest";domain=B;basePath=U;url="";method="GET";data={};reload=!1;cached=!1;constructor(){super(...arguments)}set(e,n){this[e]=n}get(e){return this[e]}},"Service")]),L("com.qcobjects.api.services",[d(class extends h("Service"){method="GET";cached=!1;headers={"Content-Type":"application/json",charset:"utf-8"};JSONresponse=null;done(e){s.debug("***** RECEIVED RESPONSE:"),s.debug(e.service.template),this.JSONresponse=JSON.parse(e.service.template)}constructor(){super(...arguments)}},"JSONService")]),L("com.qcobjects.api.config",[d(class extends h("JSONService"){method="GET";cached=!1;configFileName="config.json";headers={"Content-Type":"application/json",charset:"utf-8"};JSONresponse=null;done(e){s.debug("***** CONFIG LOADED:"),s.debug(e.service.template),this.JSONresponse=JSON.parse(e.service.template),Object.hasOwnProperty.call(this.JSONresponse,"__encoded__")&&(this.JSONresponse=JSON.parse(h("_Crypt").decrypt(this.JSONresponse.__encoded__,Z)));for(var n in this.JSONresponse)l.CONFIG.set(n,this.JSONresponse[n]);this.configLoaded.call(this)}fail(e){this.configLoaded.call(this)}constructor(){super(...arguments),this.set("url",this.get("basePath")+this.get("configFileName"))}},"ConfigService")]),L("com.qcobjects.valueObjects",[d(class extends h("InheritClass"){constructor(){super(...arguments)}},"VO")]);var je=d(function(t){var e="";if(t.TPL_SOURCE==="default"){e="{{COMPONENTS_BASE_PATH}}{{COMPONENT_NAME}}.{{TPLEXTENSION}}";for(var n in t){var r=t[n];e=e.replace("{{"+n+"}}",t[n])}}return e},"ComponentURI"),Ee=d(function(t,e){var n,r=d(function(a,u){return n=new Promise(function(c,f){var p=a.__promise__,b=Object.hasOwnProperty.call(a,"container")&&typeof a.container<"u"&&a.container!==null?a.container:a.body;if(b!==null){var y=d(function(O){O.feedComponent();var J={request:v,component:O};c.call(p,J)},"_feedComponent_");s.debug("LOADING COMPONENT DATA {{DATA}} FROM {{URL}}".replace("{{DATA}}",P(a.data)).replace("{{URL}}",a.url));var w=d(function(){var O=A?0:200;if(v.status===O){var J=v.responseText;s.debug("Data received {{DATA}}".replace("{{DATA}}",P(J))),s.debug("CREATING COMPONENT {{NAME}}".replace("{{NAME}}",a.name)),a.template=J,a.cached&&typeof S<"u"&&S.save(a.name,a.template),y.call(this,a)}else{var ce={request:v,component:a};f.call(p,ce)}},"_componentLoaded");if(typeof a.template=="string"&&a.template!=="")y.call(this,a);else{var A=!!a.url.startsWith("file:"),v=new XMLHttpRequest;if(A){if("fetch"in l){s.debug("I can use fetch..."),s.debug("It is a file to be loaded, so I will try to use fetch");var _=fetch(a.url).then(O=>{s.debug("I got a response from fetch, so I'll feed the component"),O.text().then(J=>{a.template=J,y.call(this,a)})})}}else try{s.debug("Calling the url of component in async mode."),v.open(a.method,a.url,!0)}catch{s.debug("Last try has failed... The component cannot be loaded.")}!$e&&!A&&v.setRequestHeader("Content-Type","text/html"),A||(v.onload=w);var j=d(function(O){O=!(typeof O>"u"||!O),s.debug("SENDING THE NORMAL REQUEST  "),O?"fetch"in l||(s.debug("I have to try to load the file using xhr...  "),v.send(null),v.status===XMLHttpRequest.DONE&&w.call(this)):(s.debug("Trying to send the data to the component...  "),v.send(P(a.data)))},"_directLoad");if(a.cached&&!A){s.debug("USING CACHE FOR COMPONENT: "+a.name);var S=new x({index:a.cacheIndex,load(O){j.call(this,A)},alternate(O){a.method==="GET"?(a.template=O.cache.getCached(a.cacheIndex),y.call(this,a)):j.call(this,A)}});g.lastCache=S}else s.debug("NOT USING CACHE FOR COMPONENT: "+a.name),j.call(this,A)}}else s.debug("CONTAINER DOESNT EXIST")}),n.then(function(c){return a.__done__().then(function(){var f;return typeof a.done=="function"&&(f=a.done.call(a,c)),Promise.resolve(f)})},function(c){var f;return typeof a.fail=="function"&&(f=a.fail.call(a,c)),Promise.reject(f)}).catch(function(c){s.debug("Something wrong loading the component")}),n},"_componentLoaderInBrowser"),o=d(function(a,u){return n=new Promise(function(c,f){var p=n,b=d(function(v){v.feedComponent();var _={request:null,component:v};c.call(p,_)},"_feedComponent_");s.debug("LOADING COMPONENT DATA {{DATA}} FROM {{URL}}".replace("{{DATA}}",P(a.data)).replace("{{URL}}",a.url));var y=d(function(v,_){if(v){var S={request:null,component:a};f.call(p,S)}else{var j=_.toString();s.debug("Data received {{DATA}}".replace("{{DATA}}",P(j))),s.debug("CREATING COMPONENT {{NAME}}".replace("{{NAME}}",a.name)),a.template=j,a.cached&&typeof A<"u"&&A.save(a.name,a.template),b.call(this,a)}},"_componentLoaded");if(typeof a.template=="string"&&a.template!=="")b.call(this,a);else{s.debug("Loading the component as a local file in server...");var w=d(function(v){let _=k("fs");s.debug("SENDING THE NORMAL REQUEST  "),_.readFile(a.url,y)},"_directLoad");if(a.cached){s.debug("USING CACHE FOR COMPONENT: "+a.name);var A=new x({index:a.cacheIndex,load(v){w.call(this)},alternate(v){a.method==="GET"?(a.template=v.cache.getCached(a.cacheIndex),b.call(this,a)):w.call(this)}});g.lastCache=A}else s.debug("NOT USING CACHE FOR COMPONENT: "+a.name),w.call(this)}}),n.then(function(c){return a.__done__().then(function(){var f;return typeof a.done=="function"&&(f=a.done.call(a,c)),Promise.resolve(f)})},function(c){var f;return typeof a.fail=="function"&&(f=a.fail.call(a,c)),Promise.reject(f)}).catch(function(c){s.debug("Something wrong loading the component")}),n},"_componentLoaderInNode"),i;return m?typeof e<"u"&&e?i=pe(r,arguments):i=r(t,e):i=o(t,e),i},"componentLoader"),Pe=d(function(t,e){var n=d(function(u,c){var f=new Promise(function(p,b){s.debug("LOADING SERVICE DATA {{DATA}} FROM {{URL}}".replace("{{DATA}}",P(u.data)).replace("{{URL}}",u.url));var y=new XMLHttpRequest;y.withCredentials=u.withCredentials;var w=!0;y.open(u.method,u.url,w);for(var A in u.headers)try{typeof u.headers[A]!="function"&&y.setRequestHeader(A,u.headers[A])}catch{s.debug("Something went wrong when assign the header "+A)}y.onload=function(){if(y.status===200){var j=y.responseText;if(s.debug("Data received {{DATA}}".replace("{{DATA}}",P(j))),s.debug("CREATING SERVICE {{NAME}}".replace("{{NAME}}",u.name)),u.template=j,u.cached&&typeof _<"u"&&_.save(u.name,u.template),typeof u.done=="function"){var S={request:y,service:u};u.done.call(u,S),p.call(f,S)}}else if(typeof u.fail=="function"){var S={request:y,service:u};u.fail.call(u,S),b.call(f,S)}};var v=d(function(){s.debug("SENDING THE NORMAL REQUEST  ");try{y.send(P(u.data))}catch{s.debug("SOMETHING WRONG WITH REQUEST  "),b.call(f,{request:y,service:u})}},"_directLoad");if(u.cached){var _=new x({index:u.data,load(j){v.call(this)},alternate(j){if(u.method==="GET"){if(u.template=j.cache.getCached(u.name),typeof u.done=="function"){var S={request:y,service:u};u.done.call(u,S),p.call(f,S)}}else v.call(this)}});g.lastCache=_}else v.call(this);return y});return f},"_serviceLoaderInBrowser"),r=d(function(u,c){var f=new Promise(function(p,b){if(typeof URL>"u"){g.URL=k("url").URL;let $=g.URL}var y=new URL(u.url),w;u.useHTTP2=Object.hasOwnProperty.call(u,"useHTTP2")&&u.useHTTP2;var A=d(function($){s.debug("LOADING SERVICE DATA (non-browser) {{DATA}} FROM {{URL}}".replace("{{DATA}}",P(u.data)).replace("{{URL}}",u.url));var le,Me={http2Client:j,request:$,service:u,responseHeaders:null};if(typeof u.data=="object"&&u.data!==null&&u.useHTTP2)try{s.debug("Sending data...");let ne=new Buffer(P(u.data));$.write(ne)}catch{s.debug("It was not possible to send any data")}le="",$.on("response",(ne,It)=>{s.debug("receiving response..."),Me.responseHeaders=ne,le=""}),$.on("data",ne=>{s.debug("receiving data..."),le+=""+ne.toString(),u.template=le}),u.useHTTP2&&$.resume(),$.on("end",()=>{s.debug("ending call..."),u.template=le,Object.hasOwnProperty.call(u,"useHTTP2")&&u.useHTTP2?j.destroy():$.destroy(),u.done.call(u,Me),p.call(f,Me)}),u.useHTTP2&&$.end()},"captureEvents");try{var v;if(u.useHTTP2){s.debug("using http2");var _=k("http2"),j=_.connect(y.origin);v=Object.assign({":method":u.method,":path":y.pathname},u.options),v=Object.assign(v,u.headers),w=j.request(v),w.setEncoding("utf8"),A(w)}else if(y.protocol==="http:"){var S=k("http"),O=S.request;v=Object.assign({url:u.url,headers:u.headers},u.options);var w=O(u.url);A(w)}else if(y.protocol==="https:"){var J=k("https");v=Object.assign({hostname:y.hostname,port:y.port,path:y.pathname,method:u.method,headers:u.headers},u.options);var ce=J.request(v,function($){A($)});ce.end()}else{var Xe="Protocol not supported: "+y.protocol;throw s.debug(Xe),new Error(Xe)}}catch($){s.debug($),u.fail.call(u,$),b.call(f,$)}}).catch(function(p){console.log(p),s.debug("Something happened when trying to call the service: "+u.name),u.fail.call(u,p)});return f},"_serviceLoaderInNode"),o=d(function(u,c){var f=new Promise(function(p,b){s.debug(`Calling mockup service ${u.name} ...`);var y={request:null,service:u,responseHeaders:u.responseHeaders};typeof u.mockup=="function"?u.mockup.call(u,y):u.done.call(u,y),p.call(f,y)});return f},"_serviceLoaderMockup"),i=d(function(u,c){var f=new Promise(function(p,b){s.debug(`Calling local service ${u.name} ...`);var y={request:null,service:u,responseHeaders:u.responseHeaders};typeof u.local=="function"?u.local.call(u,y):u.done.call(u,y),p.call(f,y)});return f},"_serviceLoaderLocal"),a;switch(t.kind){case"rest":m?typeof e<"u"&&e?a=pe(n,arguments):a=n(t,e):a=r(t,e);break;case"mockup":a=o(t,e);break;case"local":a=i(t,e);break;default:s.debug(`The value of the kind property of the service ${t.name} is not valid`);break}return a},"serviceLoader");if(N(Pe),N(Ee),N(je),N(he),N(P),N(z),N(se),N(at),m){Element.prototype.buildComponents=function(t=!1){var e=He,n=this,r=n.subelements(e);return We(r,null)},HTMLDocument.prototype.buildComponents=Element.prototype.buildComponents,HTMLElement.prototype.buildComponents=Element.prototype.buildComponents;var Je=d(class extends HTMLElement{constructor(){super(...arguments);let t=this,e=t.nodeName.toLowerCase(),n=q("quick-component"),r=t.getAttributeNames();n.setAttribute("name",e),t.hasAttribute("shadowed")||n.setAttribute("shadowed","true"),r.map(function(i){t.hasAttribute(i)&&(n.setAttribute(i,t.getAttribute(i)),t.removeAttribute(i))});var o=t.getAttributeNames().filter(function(i){return i.startsWith("data-")}).map(function(i){return i.split("-")[1]});o.map(function(i){n.setAttribute("data-"+i,t.getAttribute("data-"+i)),t.removeAttribute("data-"+i)}),[...t.children].map(function(i){n.appendChild(i.cloneNode(!0)),i.remove()}),t.append(n)}},"_ComponentWidget_");N(Je);var Se=d(function(t){customElements.define(t,class extends Je{})},"RegisterWidget"),Ve=d(function(){var t=[...arguments];t.filter(function(e){return typeof e=="string"}).map(function(e){Se(e)})},"RegisterWidgets");I(Se),I(Ve),N(Se),N(Ve)}m||L("com.qcobjects.api",[d(class extends h("InheritClass"){constructor({domain:e=B,basePath:n=U,body:r=null,stream:o=null,request:i=null}){super(...arguments),s.debug("Initializing BackendMicroservice...");let a=this;typeof this.body>"u"&&(this.body=null),typeof r<"u"&&(this.body=r),this.cors(),a.stream=o,o.on("data",f=>{var p=i.method.toLowerCase(),b={post:a.post};Object.hasOwnProperty.call(b,p)&&b[p].call(a,f)});var u=i.method.toLowerCase(),c={get:a.get,head:a.head,put:a.put,delete:a.delete,connect:a.connect,options:a.options,trace:a.trace,patch:a.patch};Object.hasOwnProperty.call(c,u)&&c[u].call(a)}cors(){if(this.route.cors){s.debug("Validating CORS...");let{allow_origins:n,allow_credentials:r,allow_methods:o,allow_headers:i}=this.route.cors;var e=this;if(typeof e.headers!="object"&&(e.headers={}),typeof e.route.responseHeaders!="object"&&(e.route.responseHeaders={}),typeof n<"u")if(s.debug("CORS: allow_origins available. Validating origins..."),n==="*"||typeof e.request.headers.origin>"u"||[...n].indexOf(e.request.headers.origin)!==-1)s.debug("CORS: Adding header Access-Control-Allow-Origin=*"),e.route.responseHeaders["Access-Control-Allow-Origin"]="*";else{s.debug("CORS: Origin is not allowed: "+e.request.headers.origin),s.debug("CORS: Forcing to finish the response..."),this.body={};try{this.done()}catch(a){s.debug(`It was not possible to finish the call to the microservice: ${a}`)}}else s.debug("CORS: no allow_origins available. Allowing all origins..."),s.debug("CORS: Adding header Access-Control-Allow-Origin=*"),e.route.responseHeaders["Access-Control-Allow-Origin"]="*";typeof r<"u"?(s.debug(`CORS: allow_credentials present. Allowing ${r}...`),e.route.responseHeaders["Access-Control-Allow-Credentials"]=r.toString()):(s.debug("CORS: No allow_credentials present. Allowing all credentials."),e.route.responseHeaders["Access-Control-Allow-Credentials"]="true"),typeof o<"u"?(s.debug(`CORS: allow_methods present. Allowing ${o}...`),e.route.responseHeaders["Access-Control-Allow-Methods"]=[...o].join(",")):(s.debug("CORS: No allow_methods present. Allowing only GET, OPTIONS and POST"),e.route.responseHeaders["Access-Control-Allow-Methods"]="GET, OPTIONS, POST"),typeof i<"u"?(s.debug(`CORS: allow_headers present. Allowing ${i}...`),e.route.responseHeaders["Access-Control-Allow-Headers"]=[...i].join(",")):(s.debug("CORS: No allow_headers present. Allowing all headers..."),e.route.responseHeaders["Access-Control-Allow-Headers"]="*")}else s.debug("No CORS validation available. You can specify cors in CONFIG.backend.routes[].cors")}head(e){this.done()}get(e){s.debug(`[BackendMicroservice.get] Data received: ${P(e)}`),this.done()}post(e){this.done()}put(e){this.done()}delete(e){this.done()}connect(e){this.done()}options(e){this.done()}trace(e){this.done()}patch(e){this.done()}finishWithBody(e){try{s.debug("[BackendMicroservice.finishWithBody] Ending the stream..."),s.debug(`[BackendMicroservice.finishWithBody] type of body is: ${typeof this.body}`),typeof this.body!="string"&&(this.body=P(this.body)),s.debug(`[BackendMicroservice.finishWithBody] 
 body: ${this.body} `),e.write(this.body),e.end(),s.debug("[BackendMicroservice.finishWithBody] Stream ended.")}catch(n){s.debug(`[BackendMicroservice.finishWithBody] Something went wrong ending the stream: ${n}`)}}done(){s.debug("[BackendMicroservice.done] Finalizing the response...");var e=this,n=e.stream;try{if(s.debug("[BackendMicroservice.done] Sending response headers..."),e.route.responseHeaders)s.debug(`[BackendMicroservice.done] Response headers present: ${Object.keys(e.route.responseHeaders)}`),n.respond(e.route.responseHeaders);else throw Error("[BackendMicroservice.done] No headers present.")}catch(r){s.debug(`[BackendMicroservice.done] Something went wrong sending response headers: ${r}`)}if(e.body!==null)try{s.debug("[BackendMicroservice.done] A body of message is present. Finalizing the response..."),e.finishWithBody.call(e,n)}catch(r){s.debug(`[BackendMicroservice.done] Something went wrong finalizing the response: ${r}`)}else s.debug("[BackendMicroservice.done] No body present. Ending stream..."),n.end()}},"BackendMicroservice")]),F("SourceJS",Object,{domain:B,basePath:U,body:q("script"),type:"text/javascript",containerTag:"body",url:"",data:{},async:!1,external:!1,set(t,e){this[t]=e},get(t){return this[t]},status:!1,done(){},fail(){},rebuild(){var t=this;try{document.getElementsByTagName(t.containerTag)[0].appendChild(function(e,n,r){return e.type=r.type,e.src=n,e.crossOrigin=Object.hasOwnProperty.call(r,"crossOrigin")?r.crossOrigin:"anonymous",e.async=r.async,e.onreadystatechange=function(){this.readyState==="complete"&&r.done.call(r)},e.onload=function(o){r.status=!0,r.done.call(r,o)},e.onerror=function(o){r.status=!1,r.fail.call(r,o)},r.body=e,e}.call(this,q("script"),this.external?this.url:this.basePath+this.url,t))}catch(e){t.status=!1,t.fail.call(t,e)}},Cast(t){return ae(this,t)},_new_(t){this.__new__(t),this.rebuild()}}),F("SourceCSS",Object,{domain:B,basePath:U,body:q("link"),url:"",data:{},async:!1,external:!1,set(t,e){this[t]=e},get(t){return this[t]},done(){},rebuild(){var t=this;m&&window.document.getElementsByTagName("head")[0].appendChild(function(e,n,r){return e.type="text/css",e.rel="stylesheet",e.href=n,e.crossOrigin="anonymous",e.onreadystatechange=function(){this.readyState==="complete"&&r.done.call(r)},e.onload=r.done,r.body=e,e}.call(this,q("link"),this.external?this.url:this.basePath+this.url,t))},Cast(t){return ae(this,t)},_new_(t){this.__new__(t),this.rebuild()}});var X=d(function(t){return isNaN(t)?new Number(0):new Number(t)},"__to_number");Array.prototype.unique=function(){return this.filter(function(t,e,n){return n.indexOf(t)===e})},Array.unique=function(t){return t.unique()},I(Array.unique),I(Array.prototype.unique),Array.prototype.table=function(){console.table(this)},Array.table=function(t){return t.table()},I(Array.table),I(Array.prototype.table),Array.prototype.sum=function(){return this.reduce(function(t,e){return X(t)+X(e)},0)},Array.sum=function(t){return t.sum()},I(Array.sum),I(Array.prototype.sum),Array.prototype.avg=function(){return this.length<1?0:this.reduce(function(t,e){return(X(t)+X(e))/2})},Array.avg=function(t){return t.avg()},I(Array.avg),I(Array.prototype.avg),Array.prototype.min=function(){return this.reduce(function(t,e){return X(t)<=X(e)?t:e},1/0)},Array.min=function(t){return t.min()},I(Array.min),I(Array.prototype.min),Array.prototype.max=function(){return this.reduce(function(t,e){return X(t)>=X(e)?t:e},0)},Array.max=function(t){return t.max()},I(Array.max),I(Array.prototype.max),Array.prototype.sortBy=function(t,e=!0){var n=e?function(r,o){return o[t]<r[t]?1:-1}:function(r,o){return o[t]>r[t]?1:-1};return this.sort(n)},Array.sortBy=function(t,e,n=!0){return t.sortBy(e,n)},I(Array.sortBy),I(Array.prototype.sortBy),Array.matrix=function(t,e=0){var n=d(function(r){return e},"x_func");return Array.from({length:t},n)},I(Array.matrix),Array.matrix2d=function(t,e=0){var n=d(function(o){return e},"y_func"),r=d(function(o){return Array.from({length:t},n)},"x_func");return Array.from({length:t},r)},I(Array.matrix2d),Array.matrix3d=function(t,e=0){var n=d(function(o){return Array.from({length:t},function(){return e})},"y_func"),r=d(function(o){return Array.from({length:t},n)},"x_func");return Array.from({length:t},r)},I(Array.matrix3d),l.range=function(t,e=0,n=1){return(e===0||typeof e>"u")&&(e=t,t=0),Array.from({length:(e-t)/n+1},function(r,o){return t+o*n})},I(l.range),String.prototype.list=function(){var t=this;return l.range(0,t.length-1).map(function(e){return t[e]})},I(String.prototype.list),l.getDocumentLayout=function(){var t=d((r,o)=>r>o?"landscape":null,"h"),e=d((r,o)=>o>r?"portrait":null,"v"),n=d((r,o)=>r===o?"square":null,"square");return[t(document.documentElement.clientWidth,document.documentElement.clientHeight),e(document.documentElement.clientWidth,document.documentElement.clientHeight),n(document.documentElement.clientWidth,document.documentElement.clientHeight)].filter(r=>r!==null).pop()},F("ArrayList",Array,[]),h("ArrayList").matrix=Array.matrix,h("ArrayList").matrix2d=Array.matrix2d,h("ArrayList").matrix3d=Array.matrix3d,I(h("ArrayList").matrix),I(h("ArrayList").matrix2d),I(h("ArrayList").matrix3d),F("ArrayCollection",Object,{source:M(h("ArrayList"),[]),changed(t,e){s.debug("VALUE CHANGED"),s.debug(t),s.debug(e)},push(t){var e=this;s.debug("VALUE ADDED"),s.debug(t),e.source.push(t)},pop(t){var e=this;s.debug("VALUE POPPED"),s.debug(t),e.source.pop(t)},_new_(t){var e=this,n=0;e.source=M(h("ArrayList"),t);for(var r in e.source)isNaN(r)||(s.debug("binding "+r.toString()),function(o){Object.defineProperty(e,o,{set(i){s.debug("setting "+o+"="+i),e.source[o]=i,e.changed(o,i)},get(){return e.source[o]}})}(r),n++);e.source.length=n,Object.defineProperty(e,"length",{get(){return e.source.length}})}}),L("com.qcobjects.effects.base",[d(class extends h("InheritClass"){duration=1e3;constructor(){super(...arguments)}animate({timing:e,draw:n,duration:r}){let o=performance.now();requestAnimationFrame(d(function i(a){let u=(a-o)/r;u>1&&(u=1);let c=e(u);n(Math.round(c*100)),u<1?requestAnimationFrame(i):typeof this<"u"&&this!==null&&Object.hasOwnProperty.call(this,"done")&&(typeof this.done).toLowerCase()==="function"&&this.done.call(this)},"animate"))}},"Effect")]),L("com.qcobjects.effects.transitions.base",[d(class extends h("Effect"){duration=385;defaultParams={alphaFrom:0,alphaTo:1,angleFrom:180,angleTo:0,radiusFrom:0,radiusTo:30,scaleFrom:0,scaleTo:1};fitToHeight=!1;fitToWidth=!1;effects=[];constructor(){super(...arguments),s.info("DECLARING TransitionEffect  "),this.component.defaultParams=this.defaultParams}apply({alphaFrom:e,alphaTo:n,angleFrom:r,angleTo:o,radiusFrom:i,radiusTo:a,scaleFrom:u,scaleTo:c}){var f=this;s.info("EXECUTING TransitionEffect  ");var p=f.component.shadowed?f.component.shadowRoot.host:f.component.body;f.fitToHeight&&(p.height=typeof p.offsetParent=="object"&&p.offsetParent!==null?p.offsetParent.scrollHeight:p.getBoundingClientRect().height),f.fitToWidth&&(p.width=typeof p.offsetParent=="object"&&p.offsetParent!==null?p.offsetParent.scrollWidth:p.getBoundingClientRect().width),p.style.display="block",f.effects.map(function(b,y){var w=h(b),A=new w,v=A.apply,_=[p].concat(Object.values({alphaFrom:e,alphaTo:n,angleFrom:r,angleTo:o,radiusFrom:i,radiusTo:a,scaleFrom:u,scaleTo:c}));v.apply(f,_)})}},"TransitionEffect")]),L("com.qcobjects.timing",[d(class extends h("InheritClass"){constructor(){super(...arguments)}duration=1e3;alive=!0;thread({timing:e,intervalInterceptor:n,duration:r}){var o=this;let i=performance.now();requestAnimationFrame(d(function a(u){let c=u-i,f=c/r;f>1&&(f=1);let p=e(f,c);n(Math.round(p*100)),(f<1||r===-1)&&o.alive&&requestAnimationFrame(a)},"thread"))}},"Timer")]),L("com.qcobjects.tools.essentials",[d(class extends h("InheritClass"){_toggle=!1;_inverse=!0;_positive=null;_negative=null;_dispatched=null;_args={};constructor(){super(...arguments),this._new_(...arguments)}changeToggle(){this._toggle=!this._toggle}_new_({positive:e,negative:n,args:r}){this._positive=e,this._negative=n,this._args=r}fire(){var e=this,n=new Promise(function(r,o){typeof e._positive=="function"&&typeof e._negative=="function"?(e._inverse?e._dispatched=e._toggle?e._negative.bind(e):e._positive.bind(e):e._dispatched=e._toggle?e._positive.bind(e):e._negative.bind(e),e._dispatched.call(e,e._args),r.call(n,e)):(s.debug("Toggle functions are not declared"),o.call(n,e))}).then(function(r){r.changeToggle()}).catch(function(r){s.debug(r.toString())});return n}},"Toggle")]),function(t){let e=d(function(a,u,c){var f=this;if(typeof a>"u"||a===null)throw Error(`mapper.${u}.${c} does not have a component instance or it is null.`);let p=t.global.get(c),b=a.get(c),y=a.data[c],w=typeof y<"u"?y:typeof b<"u"?b:p,A="";return typeof w<"u"&&typeof w.map<"u"?A=w.map(function(v){let _=[...Object.keys(v)].map(j=>` data-${j}="${typeof v[j]<"u"&&v[j]!==null?v[j].toString():""}"`).join("");return`<quick-component name="${u}" ${_} ></quick-component>`}).join(""):s.debug(`${u}.${c} does not have a map property`),A},"mapper");E.setProcessor(e);let n=d(function(a,u,c){var f=`
        /* CSS Document for Mobile Imports */
        @import url("${c}") (orientation:portrait);
        @import url("${c}") (max-width:460px);
        @import url("${c}") (aspect-ratio: 9/16);
        @import url("${c}") (aspect-ratio: 10/16);
        @import url("${c}") (aspect-ratio: 5/8);
        @import url("${c}") (aspect-ratio: 3/4);
        @import url("${c}") (aspect-ratio: 2/3);
        `,p=`
        @import url("${c}") (orientation:landscape) and (min-width:460px);
        @import url("${c}") (aspect-ratio: 16/9) and (min-width:460px);
        @import url("${c}") (aspect-ratio: 16/10) and (min-width:460px);
        @import url("${c}") (aspect-ratio: 8/5) and (min-width:460px);
        @import url("${c}") (aspect-ratio: 4/3) and (min-width:460px);
        @import url("${c}") (aspect-ratio: 3/2) and (min-width:460px);
        `,b={landscape:p,portrait:f};return Object.hasOwnProperty.call(b,u)?b[u]:""},"layout");E.setProcessor(n);let r=d(function(){let a=[...arguments].slice(1).map(function(c){return{[c.split("=")[0]]:c.split("=")[1]}}).reduce(function(c,f){return Object.assign(c,f)});return`<component ${[...Object.keys(a)].map(function(c){return`${c}=${a[c]}`}).join(" ")}></component>`},"component");E.setProcessor(r);let o=d(function(){let a=[...arguments].slice(1).map(function(c){return{[c.split("=")[0]]:c.split("=")[1]}}).reduce(function(c,f){return Object.assign(c,f)});return`<quick-component ${[...Object.keys(a)].map(function(c){return`${c}=${a[c]}`}).join(" ")}></quick-component>`},"quick_component");E.setProcessor(o);let i=d(function(a,u,c){return t.range(u).map(function(f){return c.replace("{{index}}",f.toString())}).join("")},"repeat");E.setProcessor(i)}(l),ue(function(){l.CONFIG.get("useSDK")||l.__start__()}),N(N),N(Te),N(L),N(F),N(M),N(st),N(ue),N(ut),N(m),N(V),function(t){L("com.qcobjects",[d(class ve extends h("InheritClass"){_GLOBAL={};__definition={};__classType="GlobalSettings";constructor(){super(...arguments),this.set=ve.set.bind(this),this.get=ve.get.bind(this),this.__start__=ve.__start__.bind(this)}static set(n,r){this._GLOBAL[n]=r}static get(n,r){var o;return typeof this._GLOBAL[n]<"u"?o=this._GLOBAL[n]:typeof r<"u"&&(o=r),o}static __start__(){var n=d(function(){var o;return m&&(o=new Promise(function(i,a){"serviceWorker"in navigator&&typeof t.CONFIG.get("serviceWorkerURI")<"u"&&(t.CONFIG.set("serviceWorkerScope",t.CONFIG.get("serviceWorkerScope")?t.CONFIG.get("serviceWorkerScope"):"/"),navigator.serviceWorker.register(t.CONFIG.get("serviceWorkerURI"),{scope:t.CONFIG.get("serviceWorkerScope")}).then(function(u){s.debug("Service Worker Registered"),i.call(o,u)},function(u){s.debug("Error registering Service Worker"),a.call(o,u)}),navigator.serviceWorker.ready.then(function(u){s.debug("Service Worker Ready"),i.call(o,u)},function(u){s.debug("Error loading Service Worker"),a.call(o,u)}))})),o},"__load__serviceWorker"),r=d(function(){var o;return m?(s.debug("Initializing the service worker"),o=n.call(t).finally(function(){s.debug("Starting to building components");try{t.componentsStack=document.buildComponents.call(document)}catch(i){throw Error(`Something went wrong trying to start components tree: ${i.message}`)}}).catch(function(i){s.debug(`error loading the service worker ${i}`)})):o=Promise.resolve(),o},"_buildComponents");s.debug("Starting to load the config settings..."),t.CONFIG.get("useConfigService",!1)?(s.debug("Loading settings using local configuration file..."),t.global.configService=M(h("ConfigService")),t.global.configService.configLoaded=r,Pe(t.global.configService)):(s.debug("Starting to load the components..."),r.call(this))}},"GlobalSettings")]),N(h("GlobalSettings")),g=M(h("GlobalSettings")),t=ee(g,t),Object.defineProperty(t,"PackagesNameList",{set(e){s.debug("PackagesNameList is readonly")},get(){var e=d(function(n){var r=[];for(var o in n)typeof n[o]<"u"&&typeof n[o]!="function"&&Object.hasOwnProperty.call(n[o],"length")&&n[o].length>0&&(r.push(o),r=r.concat(e(n[o])));return r},"_get_packages_names");return e(H)}}),Object.defineProperty(t,"PackagesList",{set(e){s.debug("PackagesList is readonly")},get(){return t.PackagesNameList.map(function(e){let n=L(e),r;return n&&(r={packageName:e,classesList:n.filter(function(o){return z(o)})}),r}).filter(function(e){return typeof e<"u"})}}),Object.defineProperty(t,"ClassesList",{set(e){s.debug("ClassesList is readonly")},get(){var e=[];return t.PackagesList.map(function(n){return e=e.concat(n.classesList.map(function(r){return{packageName:n.packageName,className:n.packageName+"."+r.__definition.__classType,classFactory:r}})),n}),e}}),Object.defineProperty(t,"ClassesNameList",{set(e){s.debug("ClassesNameList is readonly")},get(){return t.ClassesList.map(function(e){return e.className})}}),m&&(F("GLOBAL",G.global),N(h("GLOBAL"))),N(g),t.CONFIG.get("useSDK")&&function(e){var n=e.CONFIG.get("remoteImportsPath"),r=!e.CONFIG.get("useLocalSDK");e.CONFIG.set("remoteImportsPath",e.CONFIG.get("remoteSDKPath"));var o=!1,i="QCObjects-SDK";if(m)o=!0;else{var a=me("qcobjects-sdk");a!==null?(i="qcobjects-sdk",o=!0):(i="node_modules/qcobjects-sdk/QCObjects-SDK",o=!0)}if(o)if(s.info("Importing SDK... "+i),ge&&typeof Le<"u"){let u=_e()}else Te(i,function(){r?s.debug("QCObjects-SDK.js loaded from remote location"):s.debug("QCObjects-SDK.js loaded from local"),e.CONFIG.set("remoteImportsPath",n)},r);else s.debug("SDK has not been imported as it is not available at the moment")}(t)}(l),m&&pe(function(){ue(function(){(function(t){let e=0,n=!1,r=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),o=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth);function i(a){var u=Math.round(t.scrollY*100/r),c=Math.round(t.scrollX*100/o),f=new CustomEvent("scrollpercent",{detail:{percentX:c,percentY:u}});a.target.dispatchEvent(f);var p="defaultscroll",b=[0,5,10,25,50,75,90,95,100];b.filter(function(y){return y===u}).map(function(y){p="percentY"+u.toString();var w=new CustomEvent(p,{detail:{percentX:c,percentY:u}});a.target.dispatchEvent(w)})}d(i,"scrollDispatcher"),document.addEventListener("scroll",function(a){n||(requestAnimationFrame(function(){i(a),n=!1}),n=!0)})})(l)})},null),m||(typeof l.global<"u"&&Object.hasOwnProperty.call(l.global,"_fireAsyncLoad")&&l.global._fireAsyncLoad.call(this),typeof l.global<"u"&&Object.hasOwnProperty.call(l.global,"onload")&&l.global.onload.call(this)),function(t){var e=d(function(){Object.freeze(Object.prototype),Object.freeze(Object)},"__freeze__");t&&l.CONFIG.get("secureObjects",!1)?ue(function(){e()}):l.CONFIG.get("secureObjects",!1)&&e()}(m)}},"__qcobjects__").call(null,typeof re=="object"&&typeof re.exports=="object"?re.exports=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}:typeof global=="object"?global:typeof window=="object"?window:{})});var Qe=de((Yt,Ke)=>{var ht=Ze();Ke.exports=ht});var gt=de(Y=>{var mt=Y&&Y.__createBinding||(Object.create?function(C,l,g,R){R===void 0&&(R=g);var m=Object.getOwnPropertyDescriptor(l,g);(!m||("get"in m?!l.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return l[g]}}),Object.defineProperty(C,R,m)}:function(C,l,g,R){R===void 0&&(R=g),C[R]=l[g]}),bt=Y&&Y.__setModuleDefault||(Object.create?function(C,l){Object.defineProperty(C,"default",{enumerable:!0,value:l})}:function(C,l){C.default=l}),yt=Y&&Y.__importStar||function(C){if(C&&C.__esModule)return C;var l={};if(C!=null)for(var g in C)g!=="default"&&Object.prototype.hasOwnProperty.call(C,g)&&mt(l,C,g);return bt(l,C),l};Object.defineProperty(Y,"__esModule",{value:!0});var D=yt(Qe()),vt=_e();(0,D.Package)("com.qcobjects.installer",[d(class extends D.InheritClass{constructor(l){super(),this.root=l,window.addEventListener("beforeinstallprompt",()=>this.beforeinstallprompt.bind(this),!1),window.addEventListener("appinstalled",()=>this.installed.bind(this),!1),l.addEventListener("click",()=>this.install.bind(this)),l.addEventListener("touchend",()=>this.install.bind(this)),window.matchMedia("(display-mode: standalone)").addEventListener("change",g=>{let R="browser";g.matches&&(R="standalone"),vt.NotificationComponent.success(`TWA in ${R} Mode`)}),D.default.set("installer",this)}beforeinstallprompt(l){return D.logger.debug("registering installer event"),l.preventDefault(),D.default.set("promptEvent",l),this.root.classList.add("available"),!1}installed(){D.logger.debug("app is already installed"),D.default.set("promptEvent",null),this.root.classList.remove("available")}install(){let l=this.root;D.logger.debug("installer actioned");let g=D.default.get("promptEvent",null);g?(D.logger.debug("prompt event"),g.prompt(),g.userChoice.then(function(R){R.outcome==="accepted"?l.classList.remove("available"):D.logger.debug("User has chosen not to install the PWA"),g=null}).catch(function(R){g=null,l.classList.remove("available"),D.logger.warn(`Error during install:  ${R.toString()}`)})):D.logger.debug("It is not possible to get the prompt event for install ")}},"Installer")])});return gt();})();
//# sourceMappingURL=com.qcobjects.installer.js.map
